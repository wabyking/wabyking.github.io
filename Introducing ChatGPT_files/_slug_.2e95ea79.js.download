import{_ as j}from"./Footer.afb5a5ab.js";import{_ as q}from"./HeroMeta.1686d7c6.js";import{u as E,_ as G}from"./Blocks.df7a6049.js";import{_ as M}from"./List.15563f67.js";import{_ as O,a as S}from"./ResearchPublications.36b66bcd.js";import{s as z,u as J,_ as K}from"./useHeadSeo.e2aa513a.js";import{f as F,B as Q,e as U,w as W,j as X,o as u,g as _,h as Y,u as e,a as g,n as Z,k as tt,i as d}from"./entry.97833c0f.js";import{b as et}from"./usePageTransition.538c3d33.js";import{u as A}from"./usePreviewToken.0b684a63.js";import{u as ot}from"./useErrorPage.541767c5.js";import"./BlockMath.vue.a56155c3.js";import"./Listing.7549288b.js";import"./useResourceIndexData.870534a7.js";import"./usePageLoading.883407a8.js";import"./lang.4a9029fb.js";function it(t){var m,r,c,h,o,f,i;const{$helpers:a}=F(),l=(m=t.tags)==null?void 0:m.map(n=>({text:n.title,url:a.route(n,{context:"blog-details"})})),s={assetType:(r=t.hero)==null?void 0:r.assetType,intro:t.descriptionHtml,introRichText:t.descriptionRichText,links:a.heroLinks(t)};return t.hero.assetType==="image"&&(s.image=((c=t.media.heroImage)==null?void 0:c.length)&&t.media.heroImage[0]["full-width"]),t.hero.assetType==="image-small"&&(s.image=((h=t.media.heroImage)==null?void 0:h.length)&&t.media.heroImage[0]["half-width"]),{authors:(o=t.authors)==null?void 0:o.map(n=>({fullname:n.fullname,description:n.description,image:a.media.imageByRole(n,"cover","default"),link:{text:"View all articles",url:a.route(n,{context:Q})}})),acknowledgments:t.acknowledgments,blocks:(f=t.blocks)==null?void 0:f.default,colorTheme:t.colorTheme,description:t.descriptionHtml,descriptionRichText:t.descriptionRichText,hero:s,meta:{authors:(i=t.authors)==null?void 0:i.map(n=>({name:n.fullname})),date:t.publicationDateFormatted,links:t.researchPublicationLinks,tags:l},publicationDate:t.publicationDate,publicationDateFormatted:t.publicationDateFormatted,seo:t.seo,title:t.title,tags:l,citations:[...t.footnotes,...t.references]}}const Tt={__name:"[slug]",async setup(t){var n,k;let a,l;const{$twill:s}=F(),m=U(),{footnotes:r,references:c,setCitations:h}=E(),{data:o,error:f}=([a,l]=W(()=>et(`blog-detail-${m.params.slug}`,()=>{const p=s.find("blog-details").filter({slug:m.params.slug});return A().value&&p.query("preview",A().value),p.fetch()},{transform:p=>s.transform(p).pop()})),a=await a,l(),a);ot({data:o,error:f});const i=it(o==null?void 0:o.value);return X(()=>{z(o==null?void 0:o.value)}),h(i.citations),J({title:(n=o==null?void 0:o.value)==null?void 0:n.title,seo:(k=o==null?void 0:o.value)==null?void 0:k.seo}),(p,nt)=>{const H=j,I=q,L=G,y=M,T=O,N=S,V=K;return u(),_(V,{id:`${e(o).type}-${e(o).slug}`},{default:Y(()=>{var b,x,w,R,v,D,B,$,C;return[g(H,{name:"BlogDetail",image:(b=e(i))==null?void 0:b.hero.image,intro:(x=e(i))==null?void 0:x.hero.intro,introRichText:(w=e(i))==null?void 0:w.hero.introRichText,links:(R=e(i))==null?void 0:R.hero.links,template:(v=e(i))==null?void 0:v.hero.assetType,title:(D=e(i))==null?void 0:D.title,theme:(B=e(i))==null?void 0:B.colorTheme},null,8,["image","intro","introRichText","links","template","title","theme"]),g(I,Z(tt(($=e(i))==null?void 0:$.meta)),null,16),g(L,{blocks:(C=e(i))==null?void 0:C.blocks,modifier:"secondary"},null,8,["blocks"]),e(r).length?(u(),_(y,{key:0,title:"Footnotes",list:e(r),counterType:"alphabet",listType:"footnotes"},null,8,["list"])):d("",!0),e(c).length?(u(),_(y,{key:1,title:"References",list:e(c),listType:"references"},null,8,["list"])):d("",!0),e(i).authors&&e(i).authors.length?(u(),_(T,{key:2,title:"Authors",authors:e(i).authors},null,8,["authors"])):d("",!0),Object.values(e(i).acknowledgments).every(P=>P===null||P==="")?d("",!0):(u(),_(T,{key:3,title:"Acknowledgments",content:e(i).acknowledgments},null,8,["content"])),g(N,{topics:e(o).topics},null,8,["topics"])]}),_:1},8,["id"])}}};export{Tt as default};
